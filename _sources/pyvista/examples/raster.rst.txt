
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "pyvista/examples/raster.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_pyvista_examples_raster.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_pyvista_examples_raster.py:


Read a raster using xarray
~~~~~~~~~~~~~~~~~~~~~~~~~~

Use xarray and rasterio to load a raster into a StructuredGrid.

.. GENERATED FROM PYTHON SOURCE LINES 7-35







.. code-block:: default


    import pyvista as pv
    import xarray as xr
    import numpy as np


    def read_raster(filename):
        """
        Helpful: http://xarray.pydata.org/en/stable/auto_gallery/plot_rasterio.html
        """
        # Read in the data
        data = xr.open_rasterio(filename)
        values = np.asarray(data)
        nans = values == data.nodatavals
        if np.any(nans):
            # values = np.ma.masked_where(nans, values)
            values[nans] = np.nan
        # Make a mesh
        xx, yy = np.meshgrid(data["x"], data["y"])
        zz = values.reshape(xx.shape)  # will make z-comp the values in the file
        # zz = np.zeros_like(xx) # or this will make it flat
        mesh = pv.StructuredGrid(xx, yy, zz)
        mesh["data"] = values.ravel(order="F")
        return mesh


    # TODO: find raster we can use
    # topo = read_raster('topography.tif')


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.001 seconds)


.. _sphx_glr_download_pyvista_examples_raster.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: raster.py <raster.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: raster.ipynb <raster.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
