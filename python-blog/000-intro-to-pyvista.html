
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Intro to PyVista &#8212; Bane Sullivan</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.ee6fb81b276d6fba8a971ad8e9b95dd9.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/fontawesome/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.c86189f1ce1b71a67eb6.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.jpg"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Numerical Integration" href="001-numerical-integration.html" />
    <link rel="prev" title="Playground" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">Bane Sullivan</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../about.html">
  About
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Playground
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../news.html">
  News
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../publications.html">
  Publications
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/banesullivan" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="mailto:banesullivan@gmail.com" rel="noopener" target="_blank" title="Email">
            <span><i class="fas fa-envelope"></i></span>
            <label class="sr-only">Email</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/banesullivan" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Intro to PyVista
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="001-numerical-integration.html">
   Numerical Integration
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="002-using-pypistats.html">
   Using PyPIstats
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-to-it">
   Getting to it
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#initial-inspection">
   Initial Inspection
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-python-blog-000-intro-to-pyvista-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="intro-to-pyvista">
<span id="sphx-glr-python-blog-000-intro-to-pyvista-py"></span><h1>Intro to PyVista<a class="headerlink" href="#intro-to-pyvista" title="Permalink to this headline">¶</a></h1>
<p>I don’t have all that many posts in the gallery yet, so I thought I’d put this
very basic introduction to PyVista in here.</p>
<p><a class="reference external" href="https://www.pyvista.org">PyVista</a> is a 3D data management, visualization,
and mesh analysis framework in Python, and yours truly is one of its creators!
PyVista is capable of handling 3D spatial data structures with arbitrary
geometries. As such, it is able to represent just about any 3D spatially
referenced data set, geoscientific or not!</p>
<p>If you really want to learn more about PyVista, head over to its
<a class="reference external" href="https://docs.pyvista.org/examples/index.html">gallery</a>
(I have created many of those examples).</p>
<p>In this brief demo, I’m going to load some example data and demonstrate how to
plot and filter the 3D meshes.</p>
<div class="section" id="getting-to-it">
<h2>Getting to it<a class="headerlink" href="#getting-to-it" title="Permalink to this headline">¶</a></h2>
<p>So what is a “3D spatially referenced data”?…</p>
<p>In PyVista, a “mesh” is a geometrical representation of a surface or volume
in 3D space that can have any information associated to those locations/regions
in space.
We commonly refer to any spatially referenced dataset as a mesh, so often the
distinction between a mesh, a grid, and a volume can get fuzzy - but that does
not matter in PyVista as we have worked really hard to make working with these
spatial data structures as simple as possible.
For more details, check out:
<a class="reference external" href="https://docs.pyvista.org/getting-started/what-is-a-mesh.html">What is a mesh?</a></p>
<p>Anyways, let’s look at some code and especially some 3D visualizations!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>
<span class="kn">from</span> <span class="nn">pyvista</span> <span class="kn">import</span> <span class="n">examples</span>

<span class="c1"># Load OMF archive as PyVista MulitBlock dataset</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">download_damavand_volcano</span><span class="p">()</span>
<span class="n">model</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table><tr><th>Header</th><th>Data Arrays</th></tr><tr><td>
<table>
<tr><th>UniformGrid</th><th>Information</th></tr>
<tr><td>N Cells</td><td>11003760</td></tr>
<tr><td>N Points</td><td>11156040</td></tr>
<tr><td>X Bounds</td><td>4.130e+05, 6.920e+05</td></tr>
<tr><td>Y Bounds</td><td>3.864e+06, 4.096e+06</td></tr>
<tr><td>Z Bounds</td><td>-5.479e+04, 5.302e+03</td></tr>
<tr><td>Dimensions</td><td>280, 233, 171</td></tr>
<tr><td>Spacing</td><td>1.000e+03, 1.000e+03, 3.535e+02</td></tr>
<tr><td>N Arrays</td><td>1</td></tr>
</table>

</td><td>
<table>
<tr><th>Name</th><th>Field</th><th>Type</th><th>N Comp</th><th>Min</th><th>Max</th></tr>
<tr><td><b>data</b></td><td>Points</td><td>float32</td><td>1</td><td>9.782e-15</td><td>1.000e+02</td></tr>
</table>

</td></tr> </table>
</div>
<br />
<br /></div>
<div class="section" id="initial-inspection">
<h2>Initial Inspection<a class="headerlink" href="#initial-inspection" title="Permalink to this headline">¶</a></h2>
<p>Now we can go ahead and create a visualization of the 3D model of the region
surrounding the Damavand Volcano.
All we have to do is pass the mesh to the <code class="xref py py-class docutils literal notranslate"><span class="pre">pyvista.Plotter</span></code>’s
<code class="docutils literal notranslate"><span class="pre">add_mesh</span></code> method with keyword arguments for how we want it displayed
(e.g. color, opacity, etc.).</p>
<p>Below, I define an opacity mapping and colorbar limits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">opacity</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="n">clim</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
<p>Now I instantiate the <code class="docutils literal notranslate"><span class="pre">Plotter</span></code> and create the visualization.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_volume</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;magma&quot;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="n">clim</span><span class="p">,</span>
             <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span> <span class="n">opacity_unit_distance</span><span class="o">=</span><span class="mi">6000</span><span class="p">,)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="000 intro to pyvista" class="sphx-glr-single-img" src="../_images/sphx_glr_000-intro-to-pyvista_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(962759.682893736, 4390399.944685736, 385481.9418857361),
 (552532.741008, 3980173.0028, -24745.0),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
<p>And just like that, we have a 3D rendering of all that data!
Isn’t PyVista awesome?!</p>
<p>But hold on, that’s a big volume! We probably don’t want to volume render the
whole thing. So let’s extract a region of interest under the volcano.</p>
<p>The region we will extract will be between nodes 175 and 200 on the x-axis,
between nodes 105 and 132 on the y-axis, and between nodes 98 and 170 on the
z-axis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">voi</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">extract_subset</span><span class="p">([</span><span class="mi">175</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">132</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">170</span><span class="p">])</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">outline</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">voi</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;magma&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="000 intro to pyvista" class="sphx-glr-single-img" src="../_images/sphx_glr_000-intro-to-pyvista_002.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(962759.6918857361, 4390399.941885736, 385481.9418857361),
 (552532.75, 3980173.0, -24745.0),
 (0.0, 0.0, 1.0)]
</pre></div>
</div>
<p>Let’s now volume render that region of interest!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_volume</span><span class="p">(</span><span class="n">voi</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;magma&quot;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="n">clim</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
             <span class="n">opacity_unit_distance</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">camera_position</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">531554.5542909054</span><span class="p">,</span> <span class="mf">3944331.800171338</span><span class="p">,</span> <span class="mf">26563.04809259223</span><span class="p">),</span>
 <span class="p">(</span><span class="mf">599088.1433822059</span><span class="p">,</span> <span class="mf">3982089.287834022</span><span class="p">,</span> <span class="o">-</span><span class="mf">11965.14728669936</span><span class="p">),</span>
 <span class="p">(</span><span class="mf">0.3738545892415734</span><span class="p">,</span> <span class="mf">0.244312810377319</span><span class="p">,</span> <span class="mf">0.8947312427698892</span><span class="p">)]</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="000 intro to pyvista" class="sphx-glr-single-img" src="../_images/sphx_glr_000-intro-to-pyvista_003.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[(531554.5542909054, 3944331.800171338, 26563.04809259223),
 (599088.1433822059, 3982089.287834022, -11965.14728669936),
 (0.37385458924157344, 0.24431281037731903, 0.8947312427698894)]
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pv</span><span class="o">.</span><span class="n">Report</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table style='border: 3px solid #ddd;'>
  <tr>
     <td style='text-align: center; font-weight: bold; font-size: 1.2em; border: 2px solid #fff;' colspan='6'>Fri Apr 16 21:13:42 2021 UTC</td>
  </tr>
  <tr>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>OS</td>
    <td style='text-align: left; border: 2px solid #fff;'>Linux</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>CPU(s)</td>
    <td style='text-align: left; border: 2px solid #fff;'>2</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>Machine</td>
    <td style='text-align: left; border: 2px solid #fff;'>x86_64</td>
  </tr>
  <tr>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>Architecture</td>
    <td style='text-align: left; border: 2px solid #fff;'>64bit</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>Environment</td>
    <td style='text-align: left; border: 2px solid #fff;'>Python</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>GPU Vendor</td>
    <td style='text-align: left; border: 2px solid #fff;'>Mesa/X.org</td>
  </tr>
  <tr>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>GPU Renderer</td>
    <td style='text-align: left; border: 2px solid #fff;'>llvmpipe (LLVM 11.0.0, 256 bits)</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>GPU Version</td>
    <td style='text-align: left; border: 2px solid #fff;'>4.5 (Core Profile) Mesa 20.2.6</td>
  </tr>
  <tr>
     <td style='text-align: center; border: 2px solid #fff;' colspan='6'>Python 3.7.10 (default, Feb 16 2021, 12:01:19)
[GCC 9.3.0]</td>
  </tr>
  <tr>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>pyvista</td>
    <td style='text-align: left; border: 2px solid #fff;'>0.29.dev0</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>vtk</td>
    <td style='text-align: left; border: 2px solid #fff;'>9.0.1</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>numpy</td>
    <td style='text-align: left; border: 2px solid #fff;'>1.20.2</td>
  </tr>
  <tr>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>imageio</td>
    <td style='text-align: left; border: 2px solid #fff;'>2.9.0</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>appdirs</td>
    <td style='text-align: left; border: 2px solid #fff;'>1.4.4</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>scooby</td>
    <td style='text-align: left; border: 2px solid #fff;'>0.5.7</td>
  </tr>
  <tr>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>meshio</td>
    <td style='text-align: left; border: 2px solid #fff;'>4.3.12</td>
    <td style='text-align: right; background-color: #ccc; border: 2px solid #fff;'>matplotlib</td>
    <td style='text-align: left; border: 2px solid #fff;'>3.4.1</td>
    <td style= border: 2px solid #fff;'></td>
    <td style= border: 2px solid #fff;'></td>
  </tr>
</table>
</div>
<br />
<br /><p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  8.009 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-python-blog-000-intro-to-pyvista-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/adbe16b33dd63696d122dc5b06b1d93e/000-intro-to-pyvista.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">000-intro-to-pyvista.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/3c630516454f7dbbb36ed221eedc0db4/000-intro-to-pyvista.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">000-intro-to-pyvista.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
    
  <script src="../_static/js/index.c86189f1ce1b71a67eb6.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-115959679-2', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Bane Sullivan.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>